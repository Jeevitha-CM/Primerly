<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="format-detection" content="telephone=no">
    <title>Learn Primer Design - Primerly</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c5aa0;
            --primary-dark: #1e3f73;
            --primary-light: #4a7bc8;
            --accent-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }
        
        .navbar-dark {
            background-color: var(--primary-color) !important;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
        }
        
        .btn-outline-primary {
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .text-primary {
            color: var(--primary-color) !important;
        }
        
        .border-primary {
            border-color: var(--primary-color) !important;
        }
        
        .theory-section {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 60px 0;
        }
        .card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .parameter-card {
            border-left: 4px solid #007bff;
        }
        .parameter-card.success {
            border-left-color: #28a745;
        }
        .parameter-card.warning {
            border-left-color: #ffc107;
        }
        .parameter-card.danger {
            border-left-color: #dc3545;
        }
        .example-box {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        .code-example {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }
        .nav-pills .nav-link.active {
            background-color: #007bff;
        }
        .step-number {
            background-color: #007bff;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }
    </style>
    <script>
        // Disable right-click context menu
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            return false;
        });
        
        // Disable keyboard shortcuts for developer tools
        document.addEventListener('keydown', function(e) {
            // Disable F12 key
            if (e.key === 'F12') {
                e.preventDefault();
                return false;
            }
            
            // Disable Ctrl+Shift+I (Developer Tools)
            if (e.ctrlKey && e.shiftKey && e.key === 'I') {
                e.preventDefault();
                return false;
            }
            
            // Disable Ctrl+Shift+J (Console)
            if (e.ctrlKey && e.shiftKey && e.key === 'J') {
                e.preventDefault();
                return false;
            }
            
            // Disable Ctrl+U (View Source)
            if (e.ctrlKey && e.key === 'u') {
                e.preventDefault();
                return false;
            }
            
            // Disable Ctrl+Shift+C (Inspect Element)
            if (e.ctrlKey && e.shiftKey && e.key === 'C') {
                e.preventDefault();
                return false;
            }
        });
        
        // Safari-compatible console handling
        if (typeof console === 'undefined') {
            window.console = {
                log: function() {},
                info: function() {},
                warn: function() {},
                error: function() {},
                debug: function() {}
            };
        }
    </script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-dna me-2"></i>Primerly
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav ms-auto">
                    <a class="nav-link" href="/">Home</a>
                    <a class="nav-link" href="/about">About Primerly</a>
                    <a class="nav-link active" href="/learn">Learn</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="theory-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="display-4 mb-4">Learn Primer Design Theory</h1>
                    <p class="lead">PCR primer design made easy — understand the basics, avoid common mistakes, and get started with confidence!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Beginner-Friendly Theory Content -->
    <div class="container py-5">
        <div class="row mb-5">
            <div class="col-lg-8 mx-auto">
                <div class="card mb-4 border-primary">
                    <div class="card-body">
                        <h2 class="mb-3"><i class="fas fa-microscope me-2"></i>What is PCR?</h2>
                        <p><strong>PCR (Polymerase Chain Reaction)</strong> is like a DNA photocopier. Imagine you have a huge book (the genome), but you only want to copy one paragraph (your gene of interest). PCR lets you make millions of copies of just that paragraph, quickly and accurately!</p>
                        <div class="alert alert-info"><b>Analogy:</b> PCR is like using a copy machine to duplicate a specific page from a book, over and over.</div>
                        <ul>
                            <li><b>Denaturation:</b> Unzips the DNA (like opening the book).</li>
                            <li><b>Annealing:</b> Primers stick to the target (like placing bookmarks).</li>
                            <li><b>Extension:</b> DNA polymerase copies the target (like a scribe copying the page).</li>
                        </ul>
                    </div>
                </div>
                <div class="card mb-4 border-success">
                    <div class="card-body">
                        <h2 class="mb-3"><i class="fas fa-bookmark me-2"></i>What are Primers?</h2>
                        <p><strong>Primers</strong> are short pieces of DNA that tell the copy machine (DNA polymerase) where to start and stop copying. You need two primers: one for the start (forward) and one for the end (reverse).</p>
                        <div class="alert alert-success"><b>Analogy:</b> Primers are like sticky notes marking the beginning and end of the paragraph you want to copy.</div>
                        <ul>
                            <li><b>Forward Primer:</b> Binds to the start of your target.</li>
                            <li><b>Reverse Primer:</b> Binds to the end (on the opposite strand).</li>
                        </ul>
                    </div>
                </div>
                <div class="card mb-4 border-warning">
                    <div class="card-body">
                        <h2 class="mb-3"><i class="fas fa-exclamation-triangle me-2"></i>Why Primer Design Matters</h2>
                        <p>Good primer design is crucial! Poorly designed primers can:</p>
                        <ul>
                            <li>Copy the wrong region (off-target amplification)</li>
                            <li>Stick to themselves (dimers) or fold up (hairpins)</li>
                            <li>Not stick at all (no amplification)</li>
                        </ul>
                        <div class="alert alert-warning"><b>Tip:</b> Always check your primers for common mistakes before ordering!</div>
                    </div>
                </div>
                <div class="card mb-4 border-info">
                    <div class="card-body">
                        <h2 class="mb-3"><i class="fas fa-lightbulb me-2"></i>Did You Know?</h2>
                        <ul>
                            <li>Primers are usually 18–25 bases long — short enough to be specific, long enough to bind well.</li>
                            <li>GC content (the % of G and C bases) helps primers stick more strongly.</li>
                            <li>Primers should end with a G or C (a "GC clamp") for a strong finish!</li>
                            <li>Too many repeats (like AAAA or GGGG) can cause problems.</li>
                        </ul>
                    </div>
                </div>
                <div class="card mb-4 border-secondary">
                    <div class="card-body">
                        <h2 class="mb-3"><i class="fas fa-list-ul me-2"></i>Glossary</h2>
                        <ul>
                            <li><b>Primer:</b> Short DNA that starts copying</li>
                            <li><b>Tm (Melting Temperature):</b> The temp where half the DNA is single-stranded</li>
                            <li><b>GC Content:</b> % of G and C bases in the primer</li>
                            <li><b>GC Clamp:</b> G or C at the 3' end of a primer</li>
                            <li><b>Dimer:</b> Two primers sticking to each other</li>
                            <li><b>Hairpin:</b> Primer folding back on itself</li>
                            <li><b>Amplicon:</b> The DNA piece you copy</li>
                        </ul>
                    </div>
                </div>
                <div class="card mb-4 border-primary">
                    <div class="card-body">
                        <h2 class="mb-3"><i class="fas fa-shoe-prints me-2"></i>Step-by-Step Example</h2>
                        <p>Let's design primers for a simple DNA sequence:</p>
                        <div class="example-box">
                            <b>Target DNA:</b> 5'-ATGCGTACGTTAGCTAGCTAGGCTAGCTAGCTAA-3'
                        </div>
                        <ol>
                            <li><b>Pick a region to amplify:</b> Let's say bases 1–20.</li>
                            <li><b>Design Forward Primer:</b> Use the first 20 bases: <span class="text-primary">ATGCGTACGTTAGCTAGCTA</span></li>
                            <li><b>Design Reverse Primer:</b> Use the reverse complement of bases 1–20: <span class="text-danger">TAGCTAGCTAACGTACGCAT</span></li>
                            <li><b>Check:</b> Are both primers 18–25 bases? Is GC content 40–60%? Do they end with G/C?</li>
                        </ol>
                        <div class="alert alert-primary"><b>Result:</b> You now have a pair of primers ready for PCR!</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="row">
            <div class="col-lg-8">
                <h2>PCR Primer Design Fundamentals</h2>
                
                <div class="card mb-4">
                    <div class="card-body">
                        <h5>How PCR Works</h5>
                        <ol>
                            <li><strong>Denaturation:</strong> DNA is heated to 94-96°C to separate the double helix</li>
                            <li><strong>Annealing:</strong> Primers bind to complementary sequences at 50-65°C</li>
                            <li><strong>Extension:</strong> DNA polymerase synthesizes new DNA at 72°C</li>
                        </ol>
                        <p>This cycle is repeated 25-35 times, exponentially amplifying the target sequence.</p>
                    </div>
                </div>

                <div class="card mb-4">
                    <div class="card-body">
                        <h5>Types of PCR</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Standard PCR</h6>
                                <ul>
                                    <li>Traditional endpoint PCR</li>
                                    <li>Product size: 200-1000 bp</li>
                                    <li>Used for cloning, sequencing</li>
                                    <li>Gel electrophoresis analysis</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>qPCR (Real-time PCR)</h6>
                                <ul>
                                    <li>Quantitative analysis</li>
                                    <li>Product size: 80-200 bp</li>
                                    <li>Used for gene expression</li>
                                    <li>Fluorescence detection</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Quick Reference</h5>
                    </div>
                    <div class="card-body">
                        <h6>Optimal Primer Parameters:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-check text-success me-2"></i>Length: 18-25 bp</li>
                            <li><i class="fas fa-check text-success me-2"></i>Tm: 58-62°C</li>
                            <li><i class="fas fa-check text-success me-2"></i>GC content: 40-60%</li>
                            <li><i class="fas fa-check text-success me-2"></i>GC clamp: 3' end</li>
                        </ul>
                        
                        <h6>Avoid:</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-times text-danger me-2"></i>Self-dimers</li>
                            <li><i class="fas fa-times text-danger me-2"></i>Hairpins</li>
                            <li><i class="fas fa-times text-danger me-2"></i>Cross-dimers</li>
                            <li><i class="fas fa-times text-danger me-2"></i>Repeats</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Existing Tabbed Content (Basics, Parameters, etc.) -->

    <!-- Bottom panels for Early Access and Upcoming Features -->
    <div class="container py-4">
        <div class="row">
            <div class="col-md-6 mb-3">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h6 class="mb-2">Early Access</h6>
                        <p class="small mb-2"><strong>First 1,000 users</strong> get discount and advanced features.</p>
                        <button class="btn btn-sm btn-success w-100" data-bs-toggle="modal" data-bs-target="#earlyAccessModal">Join Early Access</button>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <div class="card shadow-sm">
                    <div class="card-body">
                        <h6 class="mb-2">Upcoming Features</h6>
                        <p class="small mb-2">Interested in ordering primers when we launch?</p>
                        <div class="d-flex align-items-center mb-2">
                            <button id="interest-btn" class="btn btn-sm btn-outline-primary me-2">I'd order</button>
                            <span class="small text-muted">Interest: <span id="interest-count">0</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="text-center text-muted mt-5 py-4 bg-light">
        <div class="container">
            <p>&copy; 2025 Primerly - A Biovagon Initiative | Version 1.0.0 | MIT License</p>
            <p class="small">
                <a href="/" class="text-decoration-none">Design Primers</a> | 
                <a href="/version" class="text-decoration-none">Version Info</a> |
                <a href="https://www.biovagon.org/" target="_blank" class="text-decoration-none">Biovagon</a>
            </p>
        </div>
    </footer>

    <!-- Early Access Modal -->
    <div class="modal fade" id="earlyAccessModal" tabindex="-1" aria-labelledby="earlyAccessModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="earlyAccessModalLabel">Join Early Access</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-4">
                        <h4 class="text-primary">🌟 Be Among the First 1,000 Users!</h4>
                        <p class="mb-3">Join our early access community and unlock exclusive perks:</p>
                        <div class="text-start">
                            <p class="mb-2">💸 <strong>Special discounts</strong> on primer orders (delivered within 5–10 days)</p>
                            <p class="mb-2">⚙️ <strong>Advanced features</strong> and priority support</p>
                            <p class="mb-2">🚀 <strong>Early access</strong> to new Biovagon tools and updates</p>
                            <p class="mb-3">💬 <strong>Share your opinions</strong> — help shape Primerly's next generation</p>
                            <p class="small text-muted">✨ Your feedback drives innovation. Join today and be part of Biovagon's first 1,000 researchers!</p>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Name</label>
                        <input type="text" class="form-control" id="ea-name" placeholder="Your name">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="ea-email" placeholder="you@example.com">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Phone (optional)</label>
                        <input type="text" class="form-control" id="ea-phone" placeholder="Optional">
                    </div>
                    <div id="ea-error" class="text-danger small d-none"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="submitEarlyAccess()">Join Early Access</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Real-time analytics system
        let analyticsInterval;

        // Load stats function
        async function loadStats() {
            try {
                const res = await fetch('/stats');
                const data = await res.json();
                if (data && !data.error) {
                    const ic = document.getElementById('interest-count');
                    if (ic) ic.textContent = data.order_interest || '0';
                    return data;
                }
            } catch (error) {
                console.log('Analytics load failed:', error);
            }
            return { order_interest: 0 };
        }

        // Start real-time analytics refresh
        function startAnalyticsRefresh() {
            // Load immediately
            loadStats();
            
            // Then refresh every 3 seconds for real-time updates
            analyticsInterval = setInterval(loadStats, 3000);
        }

        // Stop analytics refresh (for cleanup)
        function stopAnalyticsRefresh() {
            if (analyticsInterval) {
                clearInterval(analyticsInterval);
                analyticsInterval = null;
            }
        }

        // Initialize analytics on page load
        document.addEventListener('DOMContentLoaded', startAnalyticsRefresh);

        // Cleanup on page unload
        window.addEventListener('beforeunload', stopAnalyticsRefresh);

        // Handle order interest button
        document.getElementById('interest-btn').addEventListener('click', function() {
            fetch('/order-interest', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update immediately
                    const ic = document.getElementById('interest-count');
                    if (ic) ic.textContent = data.order_interest || '0';
                    // Change button appearance
                    this.textContent = 'Thanks!';
                    this.classList.remove('btn-outline-primary');
                    this.disabled = true;
                    
                    // Refresh all analytics to sync across pages
                    loadStats();
                    this.classList.add('btn-success');
                    this.disabled = true;
                }
            })
            .catch(error => console.error('Error:', error));
        });

        // Handle early access form submission
        function submitEarlyAccess() {
            const name = document.getElementById('ea-name').value;
            const email = document.getElementById('ea-email').value;
            const phone = document.getElementById('ea-phone').value;
            
            if (!name || !email) {
                alert('Please enter your name and email address');
                return;
            }

            fetch('/early-access-signup', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    name: name,
                    email: email,
                    phone: phone
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Thank you for joining Early Access! We\'ll be in touch soon.');
                    // Close modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('earlyAccessModal'));
                    modal.hide();
                    // Reset form
                    document.getElementById('ea-name').value = '';
                    document.getElementById('ea-email').value = '';
                    document.getElementById('ea-phone').value = '';
                } else {
                    alert('Error: ' + (data.error || 'Please try again'));
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error submitting form. Please try again.');
            });
        }
    </script>
</body>
</html> 